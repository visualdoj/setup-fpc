name: 'Setup FPC environment'

description: 'Setup a Free Pascal Compiler and add it to the PATH'

inputs:
  fpc-version:
    description: 'Version of required FPC'
    required: false
    default: 'stable'

runs:
  using: "composite"
  steps:
    - name: Fetching FPC bundle
      run: curl https://github.com/visualdoj/free-pascal-compiler-builds/releases/download/v0.1-alpha/release_3_2_2.tar.gz --output ${{ github.workspace }}\release_3_2_2.tar.gz
      shell: cmd
    
    - name: Unpacking FPC
      run: tar -xvzf ${{ github.workspace }}\.fpc\release_3_2_2.tar.gz -C ${{ github.workspace }}\.fpc\release_3_2_2
      shell: cmd
